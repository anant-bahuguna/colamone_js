{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/ai.js","webpack:///./src/boardgame.js","webpack:///(webpack)/buildin/global.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Aijs","__webpack_exports__","copyMap","thinkAI","map","turn_player","depth","a","b","evalparam","nearwin","hand","wkMap","DEFAULT_EVALPARAM","isEndX","deepThinkAllAB","getCanMovePanelX","isDraw","PIECES","NUMBERS","1","2","3","4","5","6","7","8","rtnMap","Int8Array","sum1","sum2","isNoneNode","live1","live2","num","flag1","flag2","panel_num","hasCanMovePanelX","number","x","y","target_x","target_y","target_number","canMove","idx","push","besthand","best_score","ev","end","cell_p","line","evalMap","nodeList","length","nodeMap","getNodeMap","map0","sc","global","_ai__WEBPACK_IMPORTED_MODULE_0__","BoardGamejs","init","zoom","window","innerHeight","innerWidth","document","querySelector","classList","remove","add","ctx","getContext","canv_board","createElement","width","CANV_SIZE","height","canv_board2","canv_focus","canv_pieces","canv_shadow","canv_hover_piece","canv_overlay","canv_bk","canv_cover","canv_score","canv_cache","cellSize","demo","canvas","style","RATIO","isTouch","addEventListener","ev_mouseClick","ev_touchMove","ev_mouseMove","ev_radioChange","move_start","move_prev","move_next","move_end","jumpkento","tweetlog","reloadnew","toggle","shuffleBoard","storage","getItem","setItem","undefined","parseInt","paramObj","getParam","startMap","initString","thisMap","arr","split","red_num","blue_num","getMapByParam","log","logArray","logstr","wkInitMap","wklogArray","arrow","q","w","e","z","logArr","replace","arw","match","from","to","Math","floor","decodeLog","lv","focus","img_bk","onload","img_bk_loaded","flush","onerror","setTimeout","updateMessage","id","fjs","getElementsByTagName","getElementById","js","async","src","parentNode","insertBefore","autoLog","intervalID_log","setInterval","playLog","goaled","cache_on","hover_piece","blueScore","redScore","winner","message","thinktime","intervalID","thisHand","demo_inc","COLOR_LINE","COLOR_PANEL_1","COLOR_PANEL_2","COLOR_PANEL_3","COLOR_PANEL_4","COLOR_PANEL_5","COLOR_PANEL_6","COLOR_SELECT","COLOR_SELECT2","COLOR_RED","COLOR_BLUE","COLOR_RED2","COLOR_BLUE2","COLOR_WHITE","devicePixelRatio","-1","-2","-3","-4","-5","-6","-7","-8","map_list","LIMIT_1000DAY","mouse_x","mouse_y","logPointer","logArray2","Image","parent","localStorage","clearInterval","viewport","screen","setAttribute","test","navigator","userAgent","MSStream","w2","abs","orientation","rate","round","getMousePosition","preventDefault","stopPropagation","target","indexOf","isGoaled","ai","innerHTML","level","endTime","startTime","Date","count","getNodeCount","plus","afterHand","turn","random","tmp","clientX","touches","event","rect","getBoundingClientRect","left","clientY","top","initflg","cache_flg","clearRect","drawImage","ctx_board","grad","createLinearGradient","addColorStop","strokeStyle","fillStyle","beginPath","fillRect","strokeRect","drawBoard","ctx_board2","globalAlpha","arc","PI","fill","drawBoard2","ctx_shadow","x0","y0","x1","y1","h","shadow_start_x","shadow_start_y","shadow_end_x","shadow_end_y","wkColor","center","px1","py1","px2","py2","px3","py3","px4","py4","moveTo","lineTo","closePath","drawShadow","ctx_pieces","goal","drawPiece","drawPieceAll","ctx_canv","ctx_hover","drawHoverPiece","ctx_focus","createRadialGradient","lineWidth","canm","stroke","drawFocus","ctx_score","fontsize","blue","red","textBaseline","textAlign","shadowBlur","shadowColor","font","fillText","drawScore","ctx_overlay","shadowOffsetX","shadowOffsetY","fillRoundRect","drawOverlay","ctx_cover","drawCover","wkCtx","ctx_bk","save","clip","restore","x_dot","y_dot","calcScore","toFixed","endgame","JSON","stringify","GoalTop","GoalBottom","map_json","is1000day","obj","location","search","paramstr","substring","entry","decodeURIComponent","encodeLog","x_vec","y_vec","url","href","lang","onLine","open","cookieEnabled","hasItem","sKey","RegExp","escape","cookie","unescape","sValue","self","g","this","Function","_typeof"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","/* @license Copyright (c) @kurehajime / source code: https://github.com/kurehajime/colamone_js */\n'use strict';\n// Class ------------------------------------------------\nexport function Aijs() {}\n// Header -----------------------------------------------\nAijs.copyMap = copyMap;\nAijs.thinkAI = thinkAI;\nAijs.getCanMovePanelX = getCanMovePanelX;\nAijs.isEndX = isEndX;\nAijs.isDraw = isDraw;\n\n// Body ---------------------------------------\n\n/** \n * 駒の進める方向 \n * @const \n * @type {Array.<Array.<number>>} \n * index+8:コマの数字\n */\nconst PIECES = [\n  [0, 0, 0,\n    0, 0, 0,\n    0, 1, 0],\n  [0, 1, 0,\n    0, 0, 0,\n    0, 1, 0],\n  [0, 1, 0,\n    0, 0, 0,\n    1, 0, 1],\n  [1, 0, 1,\n    0, 0, 0,\n    1, 0, 1],\n  [1, 0, 1,\n    0, 0, 0,\n    1, 1, 1],\n  [1, 1, 1,\n    0, 0, 0,\n    1, 1, 1],\n  [1, 0, 1,\n    1, 0, 1,\n    1, 1, 1],\n  [1, 1, 1,\n    1, 0, 1,\n    1, 1, 1],\n  [0, 0, 0,\n    0, 0, 0,\n    0, 0, 0],\n  [1, 1, 1,\n    1, 0, 1,\n    1, 1, 1],\n  [1, 1, 1,\n    1, 0, 1,\n    1, 0, 1],\n  [1, 1, 1,\n    0, 0, 0,\n    1, 1, 1],\n  [1, 1, 1,\n    0, 0, 0,\n    1, 0, 1],\n  [1, 0, 1,\n    0, 0, 0,\n    1, 0, 1],\n  [1, 0, 1,\n    0, 0, 0,\n    0, 1, 0],\n  [0, 1, 0,\n    0, 0, 0,\n    0, 1, 0],\n  [0, 1, 0,\n    0, 0, 0,\n    0, 0, 0]\n];\n\n/** \n * 盤の番号 \n * @const \n * @type {Array.<number>} \n */\nconst NUMBERS = [0, 1, 2, 3, 4, 5,\n  10, 11, 12, 13, 14, 15,\n  20, 21, 22, 23, 24, 25,\n  30, 31, 32, 33, 34, 35,\n  40, 41, 42, 43, 44, 45,\n  50, 51, 52, 53, 54, 55];\n/** \n * 初期評価関数 \n * @const \n * @type {Object.<number, Array.<number>>} \n */\nconst DEFAULT_EVALPARAM = {\n  1: [1800, 1850, 1900, 1950, 2100, 2800],\n  2: [1800, 1860, 1920, 2100, 2400, 3800],\n  3: [1450, 1520, 1590, 1900, 2350, 4450],\n  4: [1450, 1530, 1610, 2050, 2650, 5450],\n  5: [1350, 1440, 1530, 2100, 2850, 6350],\n  6: [1350, 1450, 1550, 2250, 3150, 7350],\n  7: [1250, 1360, 1470, 2300, 3350, 8250],\n  8: [1250, 1370, 1490, 2450, 4350, 11250]\n};\n\n/** \n * Mapをコピーして返す。 \n * @param  {Object.<number, number>}  wkMap\n * @return {Object.<number, number>} \n */\nfunction copyMap(wkMap) {\n  let rtnMap = new Int8Array(56);\n  // 不格好だがループするより高速。\n  rtnMap[0] = wkMap[0];\n  rtnMap[10] = wkMap[10];\n  rtnMap[20] = wkMap[20];\n  rtnMap[30] = wkMap[30];\n  rtnMap[40] = wkMap[40];\n  rtnMap[50] = wkMap[50];\n  rtnMap[1] = wkMap[1];\n  rtnMap[11] = wkMap[11];\n  rtnMap[21] = wkMap[21];\n  rtnMap[31] = wkMap[31];\n  rtnMap[41] = wkMap[41];\n  rtnMap[51] = wkMap[51];\n  rtnMap[2] = wkMap[2];\n  rtnMap[12] = wkMap[12];\n  rtnMap[22] = wkMap[22];\n  rtnMap[32] = wkMap[32];\n  rtnMap[42] = wkMap[42];\n  rtnMap[52] = wkMap[52];\n  rtnMap[3] = wkMap[3];\n  rtnMap[13] = wkMap[13];\n  rtnMap[23] = wkMap[23];\n  rtnMap[33] = wkMap[33];\n  rtnMap[43] = wkMap[43];\n  rtnMap[53] = wkMap[53];\n  rtnMap[4] = wkMap[4];\n  rtnMap[14] = wkMap[14];\n  rtnMap[24] = wkMap[24];\n  rtnMap[34] = wkMap[34];\n  rtnMap[44] = wkMap[44];\n  rtnMap[54] = wkMap[54];\n  rtnMap[5] = wkMap[5];\n  rtnMap[15] = wkMap[15];\n  rtnMap[25] = wkMap[25];\n  rtnMap[35] = wkMap[35];\n  rtnMap[45] = wkMap[45];\n  rtnMap[55] = wkMap[55];    \n  return rtnMap;\n}\n\n/** \n * 終了判定(実質的勝利含む) \n * @param  {Object.<number, number>}  wkMap\n * @param  {boolean}  nearwin\n * @return {number} 0:引き分け,1:先手勝利,-1:後手勝利\n */\nfunction isEndX(wkMap, nearwin) {\n  let sum1 = 0;\n  let sum2 = 0;\n  // ループだと遅いので展開\n  if (wkMap[0] > 0) { sum1 += wkMap[0]; }\n  if (wkMap[10] > 0) { sum1 += wkMap[10]; }\n  if (wkMap[20] > 0) { sum1 += wkMap[20]; }\n  if (wkMap[30] > 0) { sum1 += wkMap[30]; }\n  if (wkMap[40] > 0) { sum1 += wkMap[40]; }\n  if (wkMap[50] > 0) { sum1 += wkMap[50]; }\n  if (wkMap[5] * -1 > 0) { sum2 += wkMap[5]; }\n  if (wkMap[15] * -1 > 0) { sum2 += wkMap[15]; }\n  if (wkMap[25] * -1 > 0) { sum2 += wkMap[25]; }\n  if (wkMap[35] * -1 > 0) { sum2 += wkMap[35]; }\n  if (wkMap[45] * -1 > 0) { sum2 += wkMap[45]; }\n  if (wkMap[55] * -1 > 0) { sum2 += wkMap[55]; }\n\n  if (sum1 >= 8) {\n    return 1;\n  } else if (sum2 <= -8) {\n    return -1;\n  }\n\n  // 手詰まりは判定\n  if (isNoneNode(wkMap)) {\n    if (sum1 > (-1 * sum2)) {\n      return 1;\n    } else if (sum1 < (-1 * sum2)) {\n      return -1;\n    } else {\n      return 0;\n    }\n  }\n  // 実質的判定勝利\n  if (nearwin === false && (sum1 !== 0 || sum2 !== 0)) {\n    let live1 = 0;\n    let live2 = 0;\n    for (let i = 0; i <= 35; i++) {\n      let num = NUMBERS[i] | 0;\n      if (wkMap[num] > 0) {\n        live1 += wkMap[num];\n      } else if (wkMap[num] < 0) {\n        live2 += wkMap[num];\n      }\n    }\n    if (sum1 > (-1 * (live2 + sum2))) {\n      return 1;\n    } else if (-1 * sum2 > (live1 + sum1)) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\n/** \n * 引き分け判定。最後の一個を取るかどうかの判断\n * @param  {Object.<number, number>}  wkMap\n * @return {boolean} \n */\nfunction isDraw(wkMap) {\n  if (!isNoneNode(wkMap)) {\n    return false;\n  }\n  let sum1 = 0;\n  let sum2 = 0;\n  // ループだと遅いので展開\n  if (wkMap[0] > 0) { sum1 += wkMap[0]; }\n  if (wkMap[10] > 0) { sum1 += wkMap[10]; }\n  if (wkMap[20] > 0) { sum1 += wkMap[20]; }\n  if (wkMap[30] > 0) { sum1 += wkMap[30]; }\n  if (wkMap[40] > 0) { sum1 += wkMap[40]; }\n  if (wkMap[50] > 0) { sum1 += wkMap[50]; }\n  if (wkMap[5] * -1 > 0) { sum2 -= wkMap[5]; }\n  if (wkMap[15] * -1 > 0) { sum2 -= wkMap[15]; }\n  if (wkMap[25] * -1 > 0) { sum2 -= wkMap[25]; }\n  if (wkMap[35] * -1 > 0) { sum2 -= wkMap[35]; }\n  if (wkMap[45] * -1 > 0) { sum2 -= wkMap[45]; }\n  if (wkMap[55] * -1 > 0) { sum2 -= wkMap[55]; }\n  if (sum1 === sum2) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/** \n * 手詰まり判定\n * @param  {Object.<number, number>}  wkMap\n * @return {boolean} \n */\nfunction isNoneNode(wkMap) {\n  let flag1 = false;\n  let flag2 = false;\n  for (let i = 0; i <= 35; i++) {\n    let panel_num = NUMBERS[i] | 0;\n    if (wkMap[panel_num] === 0) {\n      continue;\n    }\n    let canMove = hasCanMovePanelX(panel_num, wkMap);\n    if (canMove === true) {\n      if (wkMap[panel_num] > 0) {\n        flag1 = true;\n      } else if (wkMap[panel_num] < 0) {\n        flag2 = true;\n      }\n    }\n    if (flag1 && flag2) {\n      return false;\n    }\n  }\n  return true;\n}\n/** \n * 動かせるマスを返す。Return:[NN,NN,NN...]\n * @param  {number}  panel_num\n * @param  {Object.<number, number>}  wkMap\n * @return {boolean} \n */\nfunction hasCanMovePanelX(panel_num, wkMap) {\n  let number = wkMap[panel_num] | 0;\n  let x = ~~(panel_num / 10); // [~~]=Math.floor \n  let y = ~~(panel_num % 10);\n\n  // アガリのコマは動かしたらダメ。何も無いマスも動かしようがない。\n  if ((number > 0 && y === 0) || (number < 0 && y === 5) || number === 0) {\n    return false;\n  }\n  for (let i = 0; i < 9; i++) {\n    if (PIECES[number + 8][i] === 0) {\n      continue;\n    }\n    let target_x = x + ~~(i % 3) - 1;\n    let target_y = y + ~~(i / 3) - 1;\n    if (target_y < 0 || target_y > 5 || target_x > 5 || target_x < 0) {\n      continue;\n    }\n\n    let idx = target_x * 10 + target_y;\n    let target_number = wkMap[idx];\n\n    // 自コマとアガリのコマはとったらダメ。\n    if ((target_number * number > 0) || (target_number > 0 && target_y === 0) || (target_number < 0 && target_y === 5)) {\n      continue;\n    }\n    return true;\n  }\n  return false;\n}\n/** \n * 動かせるマスを返す。Return:[NN,NN,NN...]\n * @param  {number}  panel_num\n * @param  {Object.<number, number>}  wkMap\n * @return {Array.<number, number>} \n */\nfunction getCanMovePanelX(panel_num, wkMap) {\n  let number = wkMap[panel_num] | 0;\n  let x = ~~(panel_num / 10); // [~~]=Math.floor \n  let y = ~~(panel_num % 10);\n  let canMove = [];\n\n  // アガリのコマは動かしたらダメ。何も無いマスも動かしようがない。\n  if ((number > 0 && y === 0) || (number < 0 && y === 5) || number === 0) {\n    return canMove;\n  }\n  for (let i = 0; i < 9; i++) {\n    if (PIECES[number + 8][i] === 0) {\n      continue;\n    }\n    let target_x = x + ~~(i % 3) - 1;\n    let target_y = y + ~~(i / 3) - 1;\n    if (target_y < 0 || target_y > 5 || target_x > 5 || target_x < 0) {\n      continue;\n    }\n\n    let idx = target_x * 10 + target_y;\n    let target_number = wkMap[idx];\n\n    // 自コマとアガリのコマはとったらダメ。\n    if ((target_number * number > 0) || (target_number > 0 && target_y === 0) || (target_number < 0 && target_y === 5)) {\n      continue;\n    }\n    canMove.push(idx);\n  }\n  return canMove;\n}\n\n/** \n * 起こりうる次の一手を返す。Return:[[q,map0],[qmap1],[q,map2]...] //q=[prev,next]\n * @param  {Object.<number, number>}  wkMap\n * @param  {number}  turn_player\n * @return {Array.<number,Array.<Array.<number, number>, Object.<number, number>>>} \n */\nfunction getNodeMap(wkMap, turn_player) {\n  let nodeList = [];\n  for (let i = 0; i <= 35; i++) {\n    let panel_num = NUMBERS[i] | 0;\n    if (wkMap[panel_num] * turn_player <= 0 || wkMap[panel_num] === 0) {\n      continue;\n    }\n    let canMove = getCanMovePanelX(panel_num, wkMap);\n    for (let num = 0; num < canMove.length; num++) {\n      let nodeMap = copyMap(wkMap);\n      nodeMap[canMove[num]] = nodeMap[panel_num];\n      nodeMap[panel_num] = 0;\n      nodeList.push([[panel_num, canMove[num]], nodeMap]);\n    }\n  }\n  return nodeList;\n}\n\n/** \n * 盤面を評価して-10000〜+10000で採点数する。\n * @param  {Object.<number, number>}  wkMap\n * @param  {boolean}  nearwin\n * @param  {Object.<number, Array.<number>>}  evalparam\n * @return {number} \n */\nfunction evalMap(wkMap, nearwin, evalparam) {\n  let ev = 0;\n\n  // 引き分け判定\n  if (isDraw(wkMap)) {\n    return 0;\n  }\n  // 終局判定\n  let end = isEndX(wkMap, nearwin);\n  if (end === 1) {\n    return +9999999;\n  } else if (end === -1) {\n    return -9999999;\n  }\n  // 評価\n  for (let i = 0; i <= 35; i++) {\n    let panel_num = NUMBERS[i] | 0;\n    let cell_p = 0;\n    let p = wkMap[panel_num];\n    let line;\n    // コマの評価値を加算\n    if (p > 0) {\n      line = 5 - (panel_num % 10);\n      cell_p += evalparam[p][line]; // ポジションボーナス\n    } else if (p < 0) {\n      line = (panel_num % 10);\n      cell_p += evalparam[-1 * p][line] * -1;\n    }\n    // 評価値に加算。\n    ev += cell_p;\n  }\n  return (ev | 0);\n}\n\n/** \n * よく考える\n */\nfunction deepThinkAllAB(map, turn_player, depth, a, b, nearwin, evalparam) {\n  let best_score = turn_player * 9999999 * -1;\n  let besthand;\n  if (depth === 0) {\n    best_score = evalMap(map, nearwin, evalparam);\n    return [besthand, best_score];\n  }\n  if (a === void 0 || b === void 0) {\n    a = 9999999 * turn_player * -1;\n    b = 9999999 * turn_player;\n  }\n\n  let nodeList = getNodeMap(map, turn_player);\n  for (let i = 0; i < nodeList.length; i++) {\n    let hand = nodeList[i][0];\n    let map0 = nodeList[i][1];\n    let sc = 0;\n    // 必勝            \n    let end = isEndX(map0, nearwin);\n    if (end === turn_player) {\n      return [hand, 999999 * turn_player];\n    }\n    // 必敗\n    if (end === turn_player * -1) {\n      if (besthand === void 0) {\n        best_score = 999999 * turn_player * -1;\n        besthand = hand;\n      }\n      continue;\n    }\n    if (isNoneNode(map0)) {\n      sc = 0;\n    } else {\n      sc = deepThinkAllAB(map0, turn_player * -1, depth - 1, b, a, nearwin, evalparam)[1];\n    }\n    if (besthand === void 0) {\n      best_score = sc;\n      besthand = hand;\n    }\n    if (turn_player === 1 && sc > best_score) {\n      best_score = sc;\n      besthand = hand;\n    } else if (turn_player === -1 && sc < best_score) {\n      best_score = sc;\n      besthand = hand;\n    }\n    if (turn_player === 1 && a < best_score || turn_player === -1 && a > best_score) {\n      a = best_score;\n    }\n    if (turn_player === 1 && b <= best_score || turn_player === -1 && b >= best_score) {\n      break;\n    }\n  }\n  return [besthand, best_score];\n}\n/** \n * 考える\n */\nfunction thinkAI(map, turn_player, depth, a, b, evalparam) {\n  let nearwin = false;\n  let hand = [null, null];\n  let wkMap = copyMap(map);\n  if (!evalparam) {\n    evalparam = DEFAULT_EVALPARAM;\n  }\n  if (isEndX(wkMap, false) !== 0) {\n    nearwin = true;\n  }\n\n  hand = deepThinkAllAB(wkMap, turn_player, depth, a, b, nearwin, evalparam);\n  if (hand[1] * turn_player === -999999) {\n    hand = deepThinkAllAB(wkMap, turn_player, 1, a, b, nearwin, evalparam);\n  }\n  return hand;\n}\n","/* @license Copyright (c) @kurehajime / source code: https://github.com/kurehajime/colamone_js */\nimport { Aijs } from \"./ai\";\n\n/** \n * BoardGamejs名前空間 \n */\n; (function (global) {\n  'use strict';\n\n  // Class ------------------------------------------------\n  function BoardGamejs() { }\n\n  // Header -----------------------------------------------\n  global.BoardGamejs = BoardGamejs;\n  global.BoardGamejs.init = init;\n\n\n  // Body ---------------------------------------\n  var ctx = null;\n  var isTouch = true;\n  var goaled=false;\n  var canv_board = null;\n  var canv_board2 = null;\n  var canv_focus = null;\n  var canv_pieces = null;\n  var canv_shadow = null;\n  var canv_hover_piece = null;\n  var canv_overlay = null;\n  var canv_bk = null;\n  var canv_cover = null;\n  var canv_score = null;\n  var canv_cache = null;\n  var cache_on = false;\n  var img_bk_loaded = false;\n  var hover_piece = null;\n  var cellSize = null;\n  var turn_player = null;\n  var blueScore = 0;\n  var redScore = 0;\n  var winner = null;\n  var message = '';\n  var thinktime = 0.0;\n  var demo = true;\n  var autoLog=false;\n  var intervalID = null;\n  var intervalID_log = null;  \n  var thisHand = [];\n  var demo_inc=0;\n  var COLOR_LINE = '#333333';\n  var COLOR_PANEL_1 = '#660033';\n  var COLOR_PANEL_2 = '#004466';\n  var COLOR_PANEL_3 = '#FFFFFF';\n  var COLOR_PANEL_4 = '#111111';\n  var COLOR_PANEL_5 = '#444444';\n  var COLOR_PANEL_6 = '#888888';\n  var COLOR_SELECT = '#7fed7f';\n  var COLOR_SELECT2='#148d14';\n  var COLOR_RED = '#E60073';\n  var COLOR_BLUE = '#0099E6';\n  var COLOR_RED2 = '#E60073';\n  var COLOR_BLUE2 = '#0099E6';\n  var COLOR_WHITE = '#FFFFFF';\n  var RATIO=1;\n  if( window.devicePixelRatio!==undefined&& window.devicePixelRatio!=1){\n    RATIO = window.devicePixelRatio;\n  }\n  var CANV_SIZE=500*RATIO;\n\n  var PIECES = {\n    '1': [1, 1, 1,\n      1, 0, 1,\n      1, 1, 1],\n    '2': [1, 1, 1,\n      1, 0, 1,\n      1, 0, 1],\n    '3': [1, 1, 1,\n      0, 0, 0,\n      1, 1, 1],\n    '4': [1, 1, 1,\n      0, 0, 0,\n      1, 0, 1],\n    '5': [1, 0, 1,\n      0, 0, 0,\n      1, 0, 1],\n    '6': [1, 0, 1,\n      0, 0, 0,\n      0, 1, 0],\n    '7': [0, 1, 0,\n      0, 0, 0,\n      0, 1, 0],\n    '8': [0, 1, 0,\n      0, 0, 0,\n      0, 0, 0],\n    '-1': [1, 1, 1,\n      1, 0, 1,\n      1, 1, 1],\n    '-2': [1, 0, 1,\n      1, 0, 1,\n      1, 1, 1],\n    '-3': [1, 1, 1,\n      0, 0, 0,\n      1, 1, 1],\n    '-4': [1, 0, 1,\n      0, 0, 0,\n      1, 1, 1],\n    '-5': [1, 0, 1,\n      0, 0, 0,\n      1, 0, 1],\n    '-6': [0, 1, 0,\n      0, 0, 0,\n      1, 0, 1],\n    '-7': [0, 1, 0,\n      0, 0, 0,\n      0, 1, 0],\n    '-8': [0, 0, 0,\n      0, 0, 0,\n      0, 1, 0]\n  };\n\n/*  var thisMap = {\n    0: -1, 10: -2, 20: -3, 30: -4, 40: -5, 50: -6,\n    1: 0, 11: -8, 21: 0, 31: 0, 41: -7, 51: 0,\n    2: 0, 12: 0, 22: 0, 32: 0, 42: 0, 52: 0,\n    3: 0, 13: 0, 23: 0, 33: 0, 43: 0, 53: 0,\n    4: 0, 14: 7, 24: 0, 34: 0, 44: 8, 54: 0,\n    5: 6, 15: 5, 25: 4, 35: 3, 45: 2, 55: 1\n  };*/\n  var thisMap =[\n    -1,0,0,0,0,6,0,0,0,0,-2,-8,\n    0,0,7,5,0,0,0,0,-3,0,0,0,\n    0,4,0,0,0,0,-4,0,0,0,0,\n    3,0,0,0,0,-5,-7,0,0,8,2,\n    0,0,0,0,-6,0,0,0,0,1\n  ]\n\n  var map_list = {};\n  var LIMIT_1000DAY = 3;\n  var mouse_x = 0;\n  var mouse_y = 0;\n  var startMap;\n  var logPointer = 0;\n  var logArray = [];\n  var logArray2 = [];\n  var img_bk = null;\n  img_bk = new Image(); img_bk.src = 'bk.gif';\n  var storage = null;\n  try {\n    if (window == parent && ('localStorage' in window) && window.localStorage !== null) {\n      storage = localStorage;\n      storage.setItem('test', 0); // Safariのプライベートモードは、できないのにできるって言うからかまをかけてみる。\n    }\n  } catch (e) {\n    storage = null;\n  }\n  if (storage === null) {\n    // localStorageが使えない場合\n    storage = {}; // ダミー\n    storage.getItem = function () { return undefined; };\n    storage.setItem = function () { return undefined; };\n\n    if (navigator.cookieEnabled) {\n      storage.hasItem = function (sKey) {\n        return (new RegExp('(?:^|;\\\\s*)' + escape(sKey).replace(/[\\-\\.\\+\\*]/g, '\\\\$&') + '\\\\s*\\\\=')).test(document.cookie);\n      };\n      storage.getItem = function (sKey) {\n        if (!sKey || !(new RegExp('(?:^|;\\\\s*)' + escape(sKey).replace(/[\\-\\.\\+\\*]/g, '\\\\$&') + '\\\\s*\\\\=')).test(document.cookie)) { return null; }\n        return unescape(document.cookie.replace(new RegExp('(?:^|.*;\\\\s*)' + escape(sKey).replace(/[\\-\\.\\+\\*]/g, '\\\\$&') + '\\\\s*\\\\=\\\\s*((?:[^;](?!;))*[^;]?).*'), '$1'));\n      };\n      storage.setItem = function (sKey, sValue) {\n        if (!sKey || /^(?:expires|max\\-age|path|domain|secure)$/i.test(sKey)) { return; }\n        document.cookie = escape(sKey) + '=' + escape(sValue);\n      };\n    }\n  }\n\n  /** \n   * 初期化\n   */\n  function init() {\n    zoom(); // 小さい端末でズーム\n    if (window.innerHeight < window.innerWidth) {\n      document.querySelector('.manual').classList.remove(\"hide\");\n    } else {\n      document.querySelector('.manual').classList.add(\"hide\");\n    }\n    ctx = document.querySelector('#canv').getContext('2d');\n\n    canv_board = document.createElement('canvas');\n    canv_board.width = CANV_SIZE;\n    canv_board.height = CANV_SIZE;\n\n\n    canv_board2 = document.createElement('canvas');\n    canv_board2.width = CANV_SIZE;\n    canv_board2.height = CANV_SIZE;\n\n    canv_focus = document.createElement('canvas');\n    canv_focus.width = CANV_SIZE;\n    canv_focus.height = CANV_SIZE;\n\n    canv_pieces = document.createElement('canvas');\n    canv_pieces.width = CANV_SIZE;\n    canv_pieces.height = CANV_SIZE;\n\n    canv_shadow = document.createElement('canvas');\n    canv_shadow.width = CANV_SIZE;\n    canv_shadow.height = CANV_SIZE;\n\n    canv_hover_piece = document.createElement('canvas');\n    canv_hover_piece.width = CANV_SIZE;\n    canv_hover_piece.height = CANV_SIZE;\n\n    canv_overlay = document.createElement('canvas');\n    canv_overlay.width = CANV_SIZE;\n    canv_overlay.height = CANV_SIZE;\n\n    canv_bk = document.createElement('canvas');\n    canv_bk.width = CANV_SIZE;\n    canv_bk.height = CANV_SIZE;\n\n    canv_cover = document.createElement('canvas');\n    canv_cover.width = CANV_SIZE;\n    canv_cover.height = CANV_SIZE;\n\n    canv_score = document.createElement('canvas');\n    canv_score.width = CANV_SIZE;\n    canv_score.height = CANV_SIZE;\n\n    canv_cache = document.createElement('canvas');\n    canv_cache.width = CANV_SIZE;\n    canv_cache.height = CANV_SIZE;\n\n    cellSize = CANV_SIZE / 6;\n    turn_player = 1;\n    demo = true;\n\n    //retina対応\n    ctx.canvas.style.width = CANV_SIZE/RATIO + \"px\";\n    ctx.canvas.style.height = CANV_SIZE/RATIO + \"px\";\n    ctx.canvas.width = CANV_SIZE ;\n    ctx.canvas.height = CANV_SIZE ;\n\n    if ('ontouchstart' in window) {\n      isTouch = true;\n    } else {\n      isTouch = false;\n    }\n    // イベントを設定\n    if (isTouch) {\n      document.querySelector('#canv').addEventListener('touchstart', ev_mouseClick);\n      document.querySelector('#canv').addEventListener('touchmove', ev_touchMove);\n    } else {\n      document.querySelector('#canv').addEventListener('mousemove', ev_mouseMove);\n      document.querySelector('#canv').addEventListener('mouseup', ev_mouseClick);\n    }\n    document.querySelector('#level').addEventListener('change', ev_radioChange);\n    document.querySelector('#prevprev').addEventListener('click', move_start);\n    document.querySelector('#prev').addEventListener('click', move_prev);\n    document.querySelector('#next').addEventListener('click', move_next);\n    document.querySelector('#nextnext').addEventListener('click', move_end);\n    document.querySelector('#replay').addEventListener('click', jumpkento);\n    document.querySelector('#tweetlog').addEventListener('click', tweetlog);\n    document.querySelector('#newgame').addEventListener('click', reloadnew);\n    document.querySelector('#collapsible').addEventListener('click', function () {\n      document.querySelector('.manual').classList.toggle(\"hide\");\n    });\n\n\n    window.addEventListener('orientationchange', zoom);\n\n    shuffleBoard();\n\n    // 連勝記録初期化\n    if (!storage.getItem('level_1')) {\n      storage.setItem('level_1', 0);\n    }\n    if (!storage.getItem('level_2')) {\n      storage.setItem('level_2', 0);\n    }\n    if (!storage.getItem('level_3')) {\n      storage.setItem('level_3', 0);\n    }\n    if (!storage.getItem('level_4')) {\n      storage.setItem('level_4', 0);\n    }\n    if (!storage.getItem('level_5')) {\n      storage.setItem('level_5', 0);\n    }\n    // レベル記憶\n    if (storage.getItem('level_save') !== undefined && storage.getItem('level_save') !== 'undefined' && storage.getItem('level_save') !== null) {\n      document.querySelector('#level').value=parseInt(storage.getItem('level_save'));\n    } else {\n      storage.setItem('level_save', 1);\n      document.querySelector('#level').value=1;\n    }\n\n    //document.querySelector('#canv').classList.add(\"hue-rotate1\");\n\n\n    // パラメータを取得\n    var paramObj = getParam();\n\n    // 盤面を初期化\n    if (paramObj.init) {\n      startMap = getMapByParam(paramObj.init);\n      thisMap = Aijs.copyMap(startMap);\n    } else {\n      startMap = Aijs.copyMap(thisMap);\n    }\n    // ログをデコード\n    if (paramObj.log) {\n      logArray = decodeLog(paramObj.log, startMap);\n    }\n    // レベル取得\n    if (paramObj.lv) {\n      document.querySelector('#level').value=parseInt(paramObj.lv);\n    }\n\n    if (logArray.length !== 0) {\n      document.querySelector('#log').classList.remove(\"hide\");\n      document.querySelector('#prevprev').classList.remove(\"hide\");\n      document.querySelector('#prev').classList.remove(\"hide\");\n      document.querySelector('#next').classList.remove(\"hide\");\n      document.querySelector('#nextnext').classList.remove(\"hide\");\n      document.querySelector('#span_replay').classList.add(\"hide\");\n      document.querySelector('#span_tweetlog').classList.add(\"hide\");\n      document.querySelector('#next').focus();\n    } else {\n      document.querySelector('#log').classList.add(\"hide\");\n      document.querySelector('#prevprev').classList.add(\"hide\");\n      document.querySelector('#prev').classList.add(\"hide\");\n      document.querySelector('#next').classList.add(\"hide\");\n      document.querySelector('#nextnext').classList.add(\"hide\");\n      document.querySelector('#span_replay').classList.add(\"hide\");\n      document.querySelector('#span_tweetlog').classList.add(\"hide\");\n    }\n\n    // 画像読み込み成功時\n    img_bk.onload = function () {\n      img_bk_loaded = true;\n      flush(true, false);\n    };\n    // 画像読み込み失敗時\n    img_bk.onerror = function () {\n      flush(true, false);\n    };\n    // もう既に読み込み終わってた時\n    if (img_bk.width !== 0) {\n      img_bk_loaded = true;\n      flush(true, false);\n    }\n    // 2.5秒後に強制描画※Googleの検索結果から飛ぶとなぜか描画が走らない事があるので。\n    setTimeout(function () {\n      if (img_bk.width !== 0) {\n        img_bk_loaded = true;\n      }\n      flush(true, false);\n    }, 2500);\n    updateMessage();\n    setTweet(); // ツイートボタンを生成\n\n    if (logArray.length === 0) {\n      // if(isBot()==false){\n      //   window.setTimeout(function(){\n      //     if(demo==true){\n      //       intervalID = window.setInterval(playDemo, 100);\n      //       playDemo();\n      //     }\n      //   },2000);\n      // }\n    } else {\n      demo = false;\n      autoLog=true;\n      intervalID_log = window.setInterval(playLog, 1000);      \n    }\n    goaled=false;\n    flush(true, false);\n  }\n\n  /** \n   * Demoを再生\n   */\n  function playDemo() {\n    if (intervalID !==null) {\n      if (Math.random() > 0.3) {\n        ai(2);\n      } else {\n        ai(1);\n      }\n    }\n    demo_inc++;\n    calcScore();\n    flush(false, false);\n    if (winner === 1 || winner === -1 || winner === 0) {\n      goaled=true;\n      winner = null;\n      flush(false, false);\n      shuffleBoard();\n    }\n    if(demo_inc>42){\n      window.clearInterval(intervalID);\n    }\n  }\n\n  /** \n   * Logを再生\n   */\n  function playLog() {\n\n    if (intervalID_log !==null&&autoLog==true) {\n      move_next();\n    }else{\n      clearInterval(intervalID_log);\n    }\n  }\n\n  /** \n   * 小さい画面ではViewportを固定化\n   */\n  function zoom() {\n    var viewport = document.querySelector('meta[name=viewport]');\n    if (screen.width < 500 && screen.height < 500) {\n      if (screen.width < screen.height) {\n        viewport.setAttribute('content', 'width=500,user-scalable=no');\n      } else {\n        viewport.setAttribute('content', 'height=500,user-scalable=no');\n      }\n    } else if (screen.width < 500) {\n      viewport.setAttribute('content', 'width=500,user-scalable=no');\n    } else if (screen.height < 500) {\n      viewport.setAttribute('content', 'height=500,user-scalable=no');\n    }\n    // iOS9のViewportはなぜか機能してくれない。\n    if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {\n      var w = screen.width;\n      var w2 = 520;\n      if (Math.abs(window.orientation) !== 0) {\n        w = screen.height;\n        w2 = 900;\n      }\n      var rate = Math.round((w / w2) * 1000) / 1000.0;\n      if (rate == Math.round(rate)) { // iOS 9のViewportは整数指定すると機能しない\n        rate += 0.0001;\n      }\n\n      viewport.setAttribute(\n        'content',\n        'initial-scale=' + rate + ', minimum-scale=' + rate + ', maximum-scale=' + rate + ', user-scalable=no'\n      );\n    }\n  }\n\n  /** \n   * マウス移動時処理\n   */\n  function ev_mouseMove(e) {\n    getMousePosition(e);\n    flush(false, true);\n  }\n  /** \n   * タッチ移動時処理\n   */\n  function ev_touchMove(e) {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  /** \n   * マウスクリック時処理\n   */\n  function ev_mouseClick(e) {\n    getMousePosition(e);\n    var target = Math.floor(mouse_x / cellSize) * 10+ Math.floor(mouse_y / cellSize);\n    if (winner !== null || logArray.length !== 0) {\n      reloadnew();\n      return true;\n    }\n    if (demo === true) {\n      demo = false;\n      thisHand = [];\n      thisMap = Aijs.copyMap(startMap);\n      logArray2 = [];\n      flush(false, false);\n      winner = null;\n      goaled=false;\n      turn_player = 1;\n      window.clearInterval(intervalID);\n      flush(false, false);\n      return true;\n    }\n\n    if (hover_piece === null) {\n      if (thisMap[target] * turn_player > 0) {\n        hover_piece = target;\n      }\n    } else {\n      if (target == hover_piece) {\n        hover_piece = null;\n        flush(false, false);\n        return;\n      }\n      var canm = Aijs.getCanMovePanelX(hover_piece, thisMap);\n      if (canm.indexOf(target) >= 0) {\n        flush(false, true);\n        if(isGoaled(thisMap,target,turn_player)){\n            goaled=true;\n            flush(false, true);\n            setTimeout(function(){\n              goaled=false;\n              flush(false, false);\n            },3000);\n        }\n\n\n        thisMap[target] = thisMap[hover_piece];\n        thisMap[hover_piece] = 0;\n        turn_player = turn_player * -1;\n        logArray2.push([hover_piece, target]);\n        thisHand = [hover_piece, target];\n        hover_piece = null;\n\n\n        // AIが考える。\n        message = 'thinking...';\n        window.setTimeout(function () {\n          flush(false, false);\n        }, 50);\n        updateMessage();\n        if (winner === null) {\n          window.setTimeout(function () {\n            ai(document.querySelector('#level').value);\n            message = '';\n            updateMessage();\n            flush(false, false);\n          }, 250);\n        }\n      }\n    }\n    flush(false, false);\n  }\n\n  /** \n   * ラジオボタン変更時処理\n   */\n  function ev_radioChange() {\n    var num = document.querySelector('#level').value;\n    storage.setItem('level_save', num);\n    if (storage.getItem('level_' + num) > 0) {\n      document.querySelector('#wins').innerHTML = storage.getItem('level_' + num) + ' win!';\n    } else {\n      document.querySelector('#wins').innerHTML = '';\n    }\n    thisMap = Aijs.copyMap(startMap);\n    thisHand = [];\n    map_list = {};\n    logArray2 = [];\n    flush(false, false);\n  }\n\n  /** \n   * AIに考えてもらう。\n   */\n  function ai(level) {\n    var hand;\n    var startTime = new Date();\n    var endTime;\n    // 終盤になったら長考してみる。\n    var count = getNodeCount(thisMap) / 2;\n    var plus = 0;\n    level = parseInt(level);\n    switch (level) {\n      case 1:\n        if (count <= 7) {\n          plus++;\n        }\n        break;\n      case 2:\n        if (count <= 8) {\n          plus++;\n        }\n        break;\n      case 3:\n        if (count <= 10) {\n          plus++;\n        }\n        if (count <= 6) {\n          plus++;\n        }\n        break;\n      case 4:\n        if (count <= 11) {\n          plus++;\n        }\n        if (count <= 7) {\n          plus++;\n        }\n        break;\n      case 5:\n        if (count > 16) {\n          plus--;\n        }\n        if (count <= 12) {\n          plus++;\n        }\n        if (count <= 8) {\n          plus++;\n        }\n        break;\n      case 6:\n        if (count > 16) {\n          plus--;\n        }\n        if (count <= 12) {\n          plus++;\n        }\n        if (count <= 8) {\n          plus++;\n        }\n        break;\n    }\n\n    hand = Aijs.thinkAI(thisMap, turn_player, level + plus + 1)[0];\n    thisHand = hand;\n    if (hand) {\n      if(isGoaled(thisMap,hand[1],turn_player)){\n          goaled=true;\n          flush(false, true);\n          setTimeout(function(){\n            goaled=false;\n            flush(false, false);\n          },3000);\n      }\n      thisMap[hand[1]] = thisMap[hand[0]];\n      thisMap[hand[0]] = 0;\n      logArray2.push([hand[0], hand[1]]);\n      // //フォーカス座標を移す。\n      // mouse_x = Math.floor(hand[1] / 10)*cellSize+1\n      // mouse_y = Math.floor(hand[1] % 10)*cellSize+1\n    }\n    turn_player = turn_player * -1;\n    endTime = new Date();\n    thinktime = (endTime - startTime) / 1000;\n  }\n  /** \n   * ゴールしたか\n   */\n  function isGoaled(map,afterHand,turn){\n      if(turn>0){\n        if(afterHand%10===0){\n            return true;\n        }\n      }else if(turn<0){\n        if(afterHand%10===5){\n            return true;\n        }\n      }\n\n      return false;\n  }\n  /** \n   * 盤面をシャッフル。\n   */\n  function shuffleBoard() {\n    // クリア\n    for (var num in thisMap) {\n      thisMap[num] = 0;\n    }\n    var arr = [1, 2, 3, 4, 5, 6, 7, 8];\n    var red_num = [0, 10, 20, 30, 40, 50, 11, 41];\n    var blue_num = [55, 45, 35, 25, 15, 5, 44, 14];\n    for (var i = arr.length - 1; i >= 0; i--) {\n      var r = Math.floor(Math.random() * (i + 1));\n      var tmp = arr[i];\n      arr[i] = arr[r];\n      arr[r] = tmp;\n    }\n    for (num in blue_num) {\n      thisMap[blue_num[num]] = arr[num];\n    }\n    for (num in red_num) {\n      thisMap[red_num[num]] = -1 * arr[num];\n    }\n  }\n\n  /** \n   * マウス位置取得\n   */\n  function getMousePosition(e) {\n    if(e==null){\n      return;\n    }\n    if (!e.clientX) { // SmartPhone\n      if (e.touches) {\n        e = e.touches[0];\n      } else if (e.touches) {\n        e = e.touches[0];\n      } else {\n        e = event.touches[0];\n      }\n    }\n    var rect = e.target.getBoundingClientRect();\n    mouse_x = e.clientX - rect.left;\n    mouse_y = e.clientY - rect.top;\n    mouse_x = mouse_x *  RATIO;\n    mouse_y = mouse_y *  RATIO;\n  }\n\n  /** \n   * 画面描画。\n   */\n  function flush(initflg, cache_flg) {\n    var wkMap = new Int8Array(thisMap);\n    ctx.clearRect(0, 0, CANV_SIZE, CANV_SIZE);\n\n    if (cache_flg === false) {\n      cache_on = false;\n    }\n    // キャッシュに保存\n    if (cache_flg === false || cache_on === false) {\n      // 盤面を描画\n      ctx.drawImage(drawBoard(initflg), 0, 0, CANV_SIZE, CANV_SIZE);\n\n      // テカリを描画\n      ctx.drawImage(drawBoard2(initflg), 0, 0, CANV_SIZE, CANV_SIZE);\n\n      // 選択したコマを除外\n      if (hover_piece !== null) {\n        wkMap[hover_piece] = 0;\n      }\n\n      // 残像を表示\n      ctx.drawImage(drawShadow(wkMap, thisHand), 0, 0, CANV_SIZE, CANV_SIZE);\n\n\n      // コマを表示\n      ctx.drawImage(drawPieceAll(wkMap), 0, 0, CANV_SIZE, CANV_SIZE);\n\n      // キャッシュに保存\n      var ctx_canv = canv_cache.getContext('2d');\n      ctx_canv.clearRect(0, 0, CANV_SIZE, CANV_SIZE);\n      ctx_canv.drawImage(ctx.canvas, 0, 0, CANV_SIZE, CANV_SIZE);\n      // キャッシュ有効化\n      cache_on = true;\n    } else {\n      // キャッシュから描画\n      ctx.drawImage(canv_cache, 0, 0, CANV_SIZE, CANV_SIZE);\n    }\n\n    // 選択したコマを表示\n    ctx.drawImage(drawHoverPiece(), 0, 0, CANV_SIZE, CANV_SIZE);\n\n    if ((mouse_x !== 0 || mouse_y !== 0) && demo === false) {\n      // フォーカスを描画\n      ctx.drawImage(drawFocus(), 0, 0, CANV_SIZE, CANV_SIZE);\n    }\n\n    //スコアを表示\n    if(goaled||winner!==null){\n      if(demo===false&&autoLog==false){\n        ctx.drawImage(drawScore(), 0, 0, CANV_SIZE, CANV_SIZE);\n      }\n    }\n    // メッセージを描画\n    ctx.drawImage(drawOverlay(), 0, 0, CANV_SIZE, CANV_SIZE);\n\n    // カバーを描画\n    if (demo === true) {\n      ctx.drawImage(drawCover(), 0, 0, CANV_SIZE, CANV_SIZE);\n    }\n\n\n  }\n\n  /** \n   * 背景描画\n   */\n  function drawBk() {\n    var ctx_bk = canv_bk.getContext('2d');\n    if (img_bk_loaded) {\n      ctx_bk.drawImage(img_bk, 0, 0, CANV_SIZE/RATIO, CANV_SIZE/RATIO, 0, 0, CANV_SIZE, CANV_SIZE);\n    }\n    return canv_bk;\n  }\n  /** \n   * カバー描画\n   */\n  function drawCover() {\n    // 背景\n    var ctx_cover = canv_cover.getContext('2d');\n    ctx_cover.clearRect(0, 0, CANV_SIZE, CANV_SIZE);\n    ctx_cover.globalAlpha = 0.50;\n    ctx_cover.fillStyle = '#000000';\n    ctx_cover.fillRect(0, 0, CANV_SIZE, CANV_SIZE);\n\n    // 枠\n    var x = cellSize * 2;\n    var y = cellSize * 3.5;\n    ctx_cover.shadowBlur = 20;\n    ctx_cover.shadowColor = 'rgba(0, 0, 0, 0.3)';\n    ctx_cover.shadowOffsetX = 5;\n    ctx_cover.shadowOffsetY = 5;\n    ctx_cover.globalAlpha = 0.8;\n    ctx_cover.fillStyle = COLOR_WHITE;\n    ctx_cover.beginPath();\n    fillRoundRect(ctx_cover, x, y, cellSize * 2, cellSize * 1, cellSize/20);\n    ctx_cover.shadowColor = 'rgba(0, 0, 0, 0)';\n    ctx_cover.shadowBlur = 0;\n    ctx_cover.shadowOffsetX = 0;\n    ctx_cover.shadowOffsetY = 0;\n\n\n\n\n    // 文字\n    var fontsize = Math.round(cellSize * 0.5);\n    var message = 'Play';\n    message+=(demo_inc%10==0)?\" \":\"\";\n    ctx_cover.shadowBlur = 0;\n    ctx_cover.shadowOffsetX = 0;\n    ctx_cover.shadowOffsetY = 0;\n    ctx_cover.shadowColor = 'rgba(0, 0, 0, 0)';\n    ctx_cover.font = 'bold ' + fontsize + 'px Play,sans-serif';\n    ctx_cover.globalAlpha = 1;\n    ctx_cover.fillStyle = COLOR_LINE;\n    ctx_cover.textBaseline = 'middle';\n    ctx_cover.textAlign = 'center';\n    ctx_cover.beginPath();\n    ctx_cover.fillText(message, cellSize * 3, cellSize * 4);\n    // 文字２\n    message = 'colamone';\n    fontsize = Math.round(cellSize * 1);\n    ctx_cover.font = 'bold ' + fontsize + 'px Play,sans-serif';\n    ctx_cover.fillStyle = COLOR_WHITE;\n    ctx_cover.shadowBlur = 0;\n    ctx_cover.beginPath();\n    ctx_cover.fillText(message, cellSize * 3, cellSize * 2);\n\n\n    return canv_cover;\n  }\n\n  /** \n   * スコア描画\n   */\n  function drawScore() {\n    // 背景\n    var ctx_score = canv_score.getContext('2d');\n    var message =\"\";\n    var fontsize = Math.round(cellSize *1.5);\n    var blue=COLOR_BLUE2;\n    var red=COLOR_RED2;\n    ctx_score.clearRect(0, 0, CANV_SIZE, CANV_SIZE);\n\n    ctx_score.globalAlpha = 0.4;\n    ctx_score.textBaseline = 'middle';\n    ctx_score.textAlign = 'center';\n    ctx_score.shadowBlur = 10;\n    ctx_score.shadowColor = 'rgba(0, 0, 0, 0.5)';\n    ctx_score.font = 'bold ' + fontsize + 'px Play,sans-serif';\n\n    // 文字\n    ctx_score.globalAlpha = 0.3;\n    ctx_score.shadowBlur = 2;\n    ctx_score.shadowColor = 'rgba(255, 255, 255, 1)';\n    ctx_score.fillStyle = red;\n    message = redScore;\n    ctx_score.beginPath();\n    ctx_score.fillText(message, cellSize * 1, cellSize * 3.8);\n    // 文字\n    message = \"8\";\n    ctx_score.beginPath();\n    ctx_score.fillText(message, cellSize * 2, cellSize * 5.3);\n    //線\n    ctx_score.lineWidth=cellSize*0.2;\n    ctx_score.strokeStyle = red;\n    ctx_score.beginPath();\n    ctx_score.moveTo(cellSize * 0.4, cellSize * 5.55);\n    ctx_score.lineTo(cellSize * 2.6, cellSize * 3.55);\n    ctx_score.closePath();\n    ctx_score.stroke();\n\n\n    // 文字\n    message = blueScore;\n    ctx_score.fillStyle = blue;\n    ctx_score.beginPath();\n    ctx_score.fillText(message, cellSize * 4, cellSize * 0.7);\n    // 文字\n    message = \"8\";\n    ctx_score.beginPath();\n    ctx_score.fillText(message, cellSize * 5, cellSize * 2.3);\n    // 文字\n    ctx_score.lineWidth=cellSize*0.2;\n    ctx_score.strokeStyle = blue;\n    ctx_score.beginPath();\n    ctx_score.moveTo(cellSize * 3.4, cellSize * 2.55);\n    ctx_score.lineTo(cellSize * 5.6, cellSize * 0.55);\n    ctx_score.closePath();\n    ctx_score.stroke();\n    return canv_score;\n  }\n\n\n\n  /** \n   * フォーカスを描画\n   */\n  function drawFocus() {\n    // 選択マスを強調\n    var x = mouse_x - (mouse_x % cellSize);\n    var y = mouse_y - (mouse_y % cellSize);\n    var ctx_focus = canv_focus.getContext('2d');\n    var grad = ctx_focus.createRadialGradient(x, y, 0, x,y, cellSize);\n    grad.addColorStop(0.3, COLOR_SELECT);\n    grad.addColorStop(1, COLOR_SELECT2);\n    ctx_focus.clearRect(0, 0, CANV_SIZE, CANV_SIZE);\n    ctx_focus.globalAlpha = 0.35;\n    ctx_focus.fillStyle = grad;\n    ctx_focus.lineWidth = 1;\n    ctx_focus.beginPath();\n    ctx_focus.fillRect(x, y, cellSize, cellSize);\n\n\n    if (isTouch === true && hover_piece === null) {\n      return canv_focus;\n    }\n\n    // 移動可能マスを強調\n    var target = (x / cellSize) * 10 + (y / cellSize);\n    if (thisMap[target] * turn_player > 0) {\n      var canm = Aijs.getCanMovePanelX(target, thisMap);\n      for (var i = 0; i <= canm.length - 1; i++) {\n        x = Math.floor(canm[i] / 10);\n        y = Math.floor(canm[i] % 10);\n        ctx_focus.globalAlpha = 0.6;\n        ctx_focus.strokeStyle = COLOR_SELECT;\n        ctx_focus.lineWidth = cellSize/20;\n        ctx_focus.beginPath();\n        ctx_focus.arc(x * cellSize + (cellSize / 2), y * cellSize + (cellSize / 2),\n         (cellSize / 2) - (cellSize/10), 0, Math.PI * 2, false);\n        ctx_focus.stroke();\n      }\n    }\n    return canv_focus;\n  }\n\n  /** \n   * 盤面を描画してCANVASを返す。\n   */\n  function drawBoard(initflg) {\n    if (initflg === false) {\n      return canv_board;\n    }\n    var ctx_board = canv_board.getContext('2d');\n    ctx_board.clearRect(0, 0, CANV_SIZE, CANV_SIZE);\n\n    var grad = ctx_board.createLinearGradient(0, 0, CANV_SIZE, CANV_SIZE);\n    grad.addColorStop(0, COLOR_PANEL_6);\n    grad.addColorStop(0.3, COLOR_PANEL_5);\n    grad.addColorStop(1, COLOR_PANEL_4);\n\n    for (var x = 0; x < 6; x++) {\n      for (var y = 0; y < 6; y++) {\n        // パネル描画\n        ctx_board.strokeStyle = COLOR_LINE;\n        if (y === 0) {\n          ctx_board.fillStyle = COLOR_PANEL_1;\n        } else if (y == 5) {\n          ctx_board.fillStyle = COLOR_PANEL_2;\n        } else if ((x + y) % 2 === 0) {\n          ctx_board.fillStyle = COLOR_PANEL_3;\n        } else {\n          ctx_board.fillStyle = COLOR_PANEL_4;\n          ctx_board.fillStyle = grad;\n        }\n        ctx_board.beginPath();\n        ctx_board.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);\n        ctx_board.strokeRect(x * cellSize, y * cellSize, cellSize, cellSize);\n      }\n    }\n\n    return canv_board;\n  }\n\n  /** \n   * 盤面をテカテカにする。\n   */\n  function drawBoard2(initflg) {\n    if (initflg === false) {\n      return canv_board2;\n    }\n    var ctx_board2 = canv_board2.getContext('2d');\n    ctx_board2.clearRect(0, 0, CANV_SIZE, CANV_SIZE);\n    ctx_board2.globalAlpha = 0.07;\n    ctx_board2.fillStyle = COLOR_WHITE;\n    ctx_board2.beginPath();\n    ctx_board2.arc(cellSize * 1, -3 * cellSize, 7 * cellSize, 0, Math.PI * 2, false);\n    ctx_board2.fill();\n\n    return canv_board2;\n  }\n\n\n  /** \n   * 浮遊しているコマを描画する。\n   */\n  function drawHoverPiece() {\n    var ctx_hover = canv_hover_piece.getContext('2d');\n    ctx_hover.clearRect(0, 0, CANV_SIZE, CANV_SIZE);\n    var x = mouse_x - (cellSize / 2);\n    var y = mouse_y - (cellSize / 2);\n    if (hover_piece !== null) {\n      drawPiece(ctx_hover, x, y, thisMap[hover_piece], false);\n    }\n    return canv_hover_piece;\n  }\n\n  /** \n   * コマを描画する。\n   */\n  function drawPiece(wkCtx, x, y, number, goal) {\n    var wkColor;\n\n    // 外枠を描画\n    if (number === 0) {\n      return wkCtx;\n    } else if (number > 0) {\n      wkColor = COLOR_BLUE;\n    } else {\n      wkColor = COLOR_RED;\n    }\n\n    var grad = ctx.createLinearGradient(x, y, x + cellSize, y + cellSize);\n    grad.addColorStop(0, 'rgb(255, 255, 255)');\n    grad.addColorStop(0.4, wkColor);\n    grad.addColorStop(1, wkColor);\n\n    wkCtx.shadowBlur = 10;\n    wkCtx.shadowColor = 'rgba(0, 0, 0, 1)';\n    wkCtx.shadowOffsetX = 2;\n    wkCtx.shadowOffsetY = 2;\n    wkCtx.fillStyle = grad;\n    wkCtx.beginPath();\n    fillRoundRect(wkCtx, x + cellSize / 10, y + cellSize / 10, cellSize - 1 * cellSize / 5, cellSize - 1 * cellSize / 5, cellSize/20);\n\n    wkCtx.shadowColor = 'rgba(0, 0, 0, 0)';\n    wkCtx.shadowBlur = 0;\n    wkCtx.shadowOffsetX = 0;\n    wkCtx.shadowOffsetY = 0;\n\n    // 曇りエフェクト\n    if (img_bk_loaded) {\n      wkCtx.globalAlpha = 0.35;\n      wkCtx.save();\n      wkCtx.clip();\n      wkCtx.drawImage(drawBk(true), x + cellSize / 10, y + cellSize / 10, cellSize - 1 * cellSize / 5, cellSize - 1 * cellSize / 5);\n      wkCtx.restore();\n      wkCtx.globalAlpha = 1;\n    }\n\n    // 文字を描画。\n    wkCtx.fillStyle = COLOR_WHITE;\n    \n    var fontsize = Math.round(cellSize * 0.18);\n    wkCtx.textBaseline = 'middle';\n    wkCtx.textAlign = 'center';\n    wkCtx.font = fontsize + \"pt 'Play',Arial\";\n    wkCtx.beginPath();\n\n    // 数字を印字\n    wkCtx.fillText(Math.abs(number), x + (cellSize / 2), y + (cellSize / 2));\n\n    // 点を描画\n    for (var i = 0; i <= PIECES[number].length - 1; i++) {\n      if (PIECES[number][i] === 0) {\n        continue;\n      }\n      var x_dot = x + cellSize / 4.16 + (Math.floor(cellSize - 1 * cellSize / 5) / 3) * Math.floor(i % 3.0);\n      var y_dot = y + cellSize / 4.16 + (Math.floor(cellSize - 1 * cellSize / 5) / 3) * Math.floor(i / 3.0);\n\n      wkCtx.fillStyle = COLOR_WHITE;\n\n      wkCtx.beginPath();\n      wkCtx.arc(x_dot, y_dot, cellSize * 0.06, 0, Math.PI * 2, false);\n      wkCtx.fill();\n    }\n\n    if (goal) { // 得点を印字\n      wkCtx.shadowBlur = 10;\n      wkCtx.shadowColor = 'rgba(0, 0, 0, 1)';\n      wkCtx.globalAlpha = 1;\n      wkCtx.fillStyle = COLOR_WHITE;\n      fontsize = Math.round(cellSize * 0.5);\n      wkCtx.textBaseline = 'middle';\n      wkCtx.textAlign = 'center';\n      wkCtx.font = 'bolder ' + fontsize + 'pt Play,Arial ';\n      wkCtx.beginPath();\n      wkCtx.fillText(Math.abs(number), x + (cellSize / 2), y + (cellSize / 2));\n      wkCtx.globalAlpha = 1;\n      wkCtx.shadowColor = 'rgba(0, 0, 0, 0)';\n      wkCtx.shadowBlur = 0;\n    }\n\n    return wkCtx;\n  }\n  // 角丸\n  function fillRoundRect(ctx, x, y, w, h, r) {\n    ctx.beginPath();\n    ctx.moveTo(x + r, y);\n    ctx.lineTo(x + w - r, y);\n    ctx.arc(x + w - r, y + r, r, Math.PI * 1.5, 0, false);\n    ctx.lineTo(x + w, y + h - r);\n    ctx.arc(x + w - r, y + h - r, r, 0, Math.PI * 0.5, false);\n    ctx.lineTo(x + r, y + h);\n    ctx.arc(x + r, y + h - r, r, Math.PI * 0.5, Math.PI, false);\n    ctx.lineTo(x, y + r);\n    ctx.arc(x + r, y + r, r, Math.PI, Math.PI * 1.5, false);\n    ctx.closePath();\n    ctx.fill();\n  }\n\n  /** \n   * コマをすべて描画\n   */\n  function drawPieceAll(wkMap) {\n    var ctx_pieces = canv_pieces.getContext('2d');\n    ctx_pieces.clearRect(0, 0, CANV_SIZE, CANV_SIZE);\n    for (var x = 0; x < 6; x++) {\n      for (var y = 0; y < 6; y++) {\n        if (wkMap[x * 10 + y] !== 0) {\n          var goal = false;\n          if (wkMap[x * 10 + y] > 0 && y === 0) {\n            goal = true;\n          } else if (wkMap[x * 10 + y] < 0 && y == 5) {\n            goal = true;\n          }\n          ctx_pieces = drawPiece(ctx_pieces, x * cellSize, y * cellSize, wkMap[x * 10 + y], goal);\n        }\n      }\n    }\n    return canv_pieces;\n  }\n  /** \n   * 残像を描画する。\n   */\n  function drawShadow(wkMap, hand) {\n    var ctx_shadow = canv_shadow.getContext('2d');\n    ctx_shadow.clearRect(0, 0, CANV_SIZE, CANV_SIZE);\n    var x0 = (hand[0] / 10 | 0);\n    var y0 = hand[0] % 10;\n    var x1 = (hand[1] / 10 | 0);\n    var y1 = hand[1] % 10;\n    var h = cellSize - 1 * cellSize / 5;\n    var w = cellSize - 1 * cellSize / 5;\n    var x = x1 * cellSize + cellSize / 10;\n    var y = y1 * cellSize + cellSize / 10;\n    var shadow_start_x = x + w / 2;\n    var shadow_start_y = y + h / 2;\n    var shadow_end_x = shadow_start_x;\n    var shadow_end_y = shadow_start_y;\n    var number = wkMap[hand[1]];\n    var wkColor = '';\n    var center = 0;\n    var grad;\n    if (hand.length != 2) {\n      return canv_shadow;\n    }\n    if (number > 0) {\n      wkColor = COLOR_BLUE; // \"#EAEFFD\";   \n    } else {\n      wkColor = COLOR_RED; // \"#FDEAFA\";           \n    }\n    if (x0 == x1 || y0 == y1) { // 直角移動\n      if ((x0 + y0) % 2 === 0 && y0 !== 0 && y0 != 5) {\n        center = 0.5;\n      } else {\n        center = 0.3;\n      }\n      if (x0 < x1) {\n        x = x - w + 10;\n        shadow_end_x = shadow_end_x - w;\n      }\n      if (x0 > x1) {\n        x = x + w - 10;\n        shadow_end_x = shadow_end_x + w;\n      }\n      if (y0 < y1) {\n        y = y - h + 10;\n        shadow_end_y = shadow_end_y - h;\n      }\n      if (y0 > y1) {\n        y = y + h - 10;\n        shadow_end_y = shadow_end_y + h;\n      }\n      grad = ctx_shadow.createLinearGradient(shadow_start_x, shadow_start_y, shadow_end_x, shadow_end_y);\n\n      grad.addColorStop(0, wkColor);\n      grad.addColorStop(center, wkColor);\n      grad.addColorStop(1, 'rgba(255, 255, 255, 0)');\n      ctx_shadow.fillStyle = grad;\n      ctx_shadow.fillRect(x, y, h, w);\n    } else { // 斜め移動\n      if ((x0 + y0) % 2 === 0 && y0 !== 0 && y0 != 5) {\n        center = 0.3;\n      } else {\n        center = 0.5;\n      }\n      var px1, py1, px2, py2, px3, py3, px4, py4;\n      if (x0 < x1 && y0 < y1) {\n        px1 = x;\n        py1 = y - h;\n        px2 = x + w;\n        py2 = y;\n        px3 = x;\n        py3 = y + h;\n        px4 = x - w;\n        py4 = y;\n        shadow_end_x = shadow_end_x - w;\n        shadow_end_y = shadow_end_y - h;\n        shadow_start_x = shadow_start_x + w * 2;\n        shadow_start_y = shadow_start_y + h * 2;\n      }\n      if (x0 > x1 && y0 > y1) {\n        px1 = x + w;\n        py1 = y;\n        px2 = x + w + w;\n        py2 = y + h;\n        px3 = x + w;\n        py3 = y + h + h;\n        px4 = x;\n        py4 = y + h;\n        shadow_end_x = shadow_end_x + w;\n        shadow_end_y = shadow_end_y + h;\n        shadow_start_x = shadow_start_x - w * 2;\n        shadow_start_y = shadow_start_y - h * 2;\n      }\n      if (x0 < x1 && y0 > y1) {\n        px1 = x;\n        py1 = y;\n        px2 = x + w;\n        py2 = y + h;\n        px3 = x;\n        py3 = y + h + h;\n        px4 = x - w;\n        py4 = y + h;\n        shadow_end_x = shadow_end_x - w;\n        shadow_end_y = shadow_end_y + h;\n        shadow_start_x = shadow_start_x + w * 2;\n        shadow_start_y = shadow_start_y - h * 2;\n      }\n      if (x0 > x1 && y0 < y1) {\n        px1 = x + w;\n        py1 = y - h;\n        px2 = x + w + w;\n        py2 = y;\n        px3 = x + w;\n        py3 = y + h;\n        px4 = x;\n        py4 = y;\n        shadow_end_x = shadow_end_x + w;\n        shadow_end_y = shadow_end_y - h;\n        shadow_start_x = shadow_start_x - w * 2;\n        shadow_start_y = shadow_start_y + h * 2;\n      }\n      ctx_shadow.beginPath();\n      ctx_shadow.moveTo(px1, py1);\n      ctx_shadow.lineTo(px2, py2);\n      ctx_shadow.lineTo(px3, py3);\n      ctx_shadow.lineTo(px4, py4);\n      ctx_shadow.lineTo(px1, py1);\n      ctx_shadow.closePath();\n      grad = ctx_shadow.createLinearGradient(shadow_start_x, shadow_start_y, shadow_end_x, shadow_end_y);\n      grad.addColorStop(0, wkColor);\n      grad.addColorStop(center, wkColor);\n      grad.addColorStop(0.97, 'rgba(255, 255, 255, 0)');\n      ctx_shadow.fillStyle = grad;\n      ctx_shadow.fill();\n    }\n\n    return canv_shadow;\n  }\n  /** \n   * メッセージを描画\n   */\n  function drawOverlay() {\n    var ctx_overlay = canv_overlay.getContext('2d');\n    var x = cellSize * 1.3;\n    var y = cellSize * 2.5;\n\n    ctx_overlay.clearRect(0, 0, CANV_SIZE, CANV_SIZE);\n\n    if (message === '') {\n      return canv_overlay;\n    }\n    ctx_overlay.shadowBlur = 10;\n    ctx_overlay.shadowColor = 'rgba(100, 100, 100, 0.5)';\n    ctx_overlay.shadowOffsetX = 5;\n    ctx_overlay.shadowOffsetY = 5;\n\n    ctx_overlay.globalAlpha = 0.9;\n    ctx_overlay.fillStyle = COLOR_WHITE;\n    fillRoundRect(ctx_overlay, x, y, cellSize * 3.4, cellSize * 1, cellSize/20);\n\n    var fontsize = Math.round(cellSize * 0.36);\n    ctx_overlay.shadowBlur = 0;\n    ctx_overlay.shadowOffsetX = 0;\n    ctx_overlay.shadowOffsetY = 0;\n    ctx_overlay.shadowColor = 'rgba(0, 0, 0, 0)';\n    ctx_overlay.font = 'bold ' + fontsize + 'px Play,sans-serif';\n    ctx_overlay.globalAlpha = 1;\n    ctx_overlay.fillStyle = COLOR_LINE;\n    ctx_overlay.textBaseline = 'middle';\n    ctx_overlay.textAlign = 'center';\n    ctx_overlay.beginPath();\n    ctx_overlay.fillText(message, cellSize * 3, cellSize * 3);\n\n    return canv_overlay;\n  }\n\n  /** \n   * メッセージを更新\n   */\n  function updateMessage() {\n    calcScore();\n    var Block = '';\n    document.querySelector('#blue').innerHTML = 'Blue: ' + blueScore + '/8';\n    document.querySelector('#red').innerHTML = ' Red: ' + redScore + '/8';\n    document.querySelector('#time').innerHTML = '(' + (thinktime.toFixed(3)) + 'sec)';\n    if (logArray.length === 0) {\n      if (winner == 1) {\n        message = 'You win!';\n        storage.setItem('level_' + document.querySelector('#level').value,\n          parseInt(storage.getItem('level_' + document.querySelector('#level').value)) + 1);\n        endgame();\n      } else if (winner == -1) {\n        message = 'You lose...';\n        storage.setItem('level_' + document.querySelector('#level').value, 0);\n        endgame();\n      } else if (winner === 0) {\n        if (map_list[JSON.stringify(thisMap)] >= LIMIT_1000DAY) {\n          message = '3fold repetition';\n        } else {\n          message = '-- Draw --';\n        }\n        endgame();\n      }\n    }\n\n    if (storage.getItem('level_' + document.querySelector('#level').value) > 0) {\n      document.querySelector('#wins').innerHTML = storage.getItem('level_' + document.querySelector('#level').value) + ' win!';\n    } else {\n      document.querySelector('#wins').innerHTML = '';\n    }\n  }\n\n  /** \n   * ゲーム終了\n   */\n  function endgame() {\n    if (logArray.length === 0) {\n      document.querySelector('#span_replay').classList.remove(\"hide\");\n      document.querySelector('#span_tweetlog').classList.remove(\"hide\");\n    }\n  }\n  /** \n   * 得点計算。\n   */\n  function calcScore() {\n    var sum1 = 0;\n    var sum2 = 0;\n    var GoalTop = [0, 10, 20, 30, 40, 50];\n    var GoalBottom = [5, 15, 25, 35, 45, 55];\n    // 点数勝利        \n    for (var i in GoalTop) {\n      if (thisMap[GoalTop[i]] * 1 > 0) {\n        sum1 += thisMap[GoalTop[i]];\n      }\n    }\n    for (i in GoalBottom) {\n      if (thisMap[GoalBottom[i]] * -1 > 0) {\n        sum2 += thisMap[GoalBottom[i]];\n      }\n    }\n    if (sum1 >= 8) {\n      winner = 1;\n    } else if (sum2 <= -8) {\n      winner = -1;\n    }\n\n    // 手詰まりは判定\n    if (isNoneNode(thisMap)) {\n      if (Math.abs(sum1) > Math.abs(sum2)) {\n        winner = 1;\n      } else if (Math.abs(sum1) < Math.abs(sum2)) { // 引き分けは後攻勝利\n        winner = -1;\n      } else if (Math.abs(sum1) == Math.abs(sum2)) {\n        winner = 0;\n      }\n    } else {\n      if (is1000day(thisMap) === true) {\n        winner = 0;\n      }\n    }\n    blueScore = Math.abs(sum1);\n    redScore = Math.abs(sum2);\n  }\n\n  /** \n   * 手詰まり判定。\n   */\n  function isNoneNode(wkMap) {\n    var flag1 = false;\n    var flag2 = false;\n    for (var panel_num in wkMap) {\n      if (wkMap[panel_num] === 0) {\n        continue;\n      }\n      var canMove = Aijs.getCanMovePanelX(panel_num, wkMap);\n      if (canMove.length !== 0) {\n        if (wkMap[panel_num] > 0) {\n          flag1 = true;\n        } else if (wkMap[panel_num] < 0) {\n          flag2 = true;\n        }\n      }\n      if (flag1 && flag2) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n\n  /** \n   * 千日手\n   */\n  function is1000day(wkMap) {\n    var map_json = JSON.stringify(wkMap);\n    if (map_list[map_json] === undefined) {\n      map_list[map_json] = 1;\n      return false;\n    } else {\n      map_list[map_json] += 1;\n    }\n    if (map_list[map_json] >= LIMIT_1000DAY) {\n      return true;\n    }\n    return false;\n  }\n\n  /** \n   * 手の数を取得\n   */\n  function getNodeCount(wkMap) {\n    var count = 0;\n    for (var panel_num in wkMap) {\n      if (wkMap[panel_num] === 0) {\n        continue;\n      }\n      var canMove = Aijs.getCanMovePanelX(panel_num, wkMap);\n      count += canMove.length;\n    }\n    return count;\n  }\n\n\n  /** \n   * パラメータ取得\n   */\n  function getParam() {\n    var obj = {};\n    if (1 < document.location.search.length) {\n      var paramstr = document.location.search.substring(1).split('&');\n      for (var i = 0; i < paramstr.length; i++) {\n        var entry = paramstr[i].split('=');\n        var key = decodeURIComponent(entry[0]);\n        var value = decodeURIComponent(entry[1]);\n        obj[key] = decodeURIComponent(value);\n      }\n    }\n    return obj;\n  }\n\n  /** \n   * パタメータから初期配置を取得\n   */\n  function getMapByParam(initString) {\n    var wkMap;\n    if (initString) {\n      wkMap = Aijs.copyMap(thisMap);\n      // クリア\n      for (var num in wkMap) {\n        wkMap[num] = 0;\n      }\n      var arr = initString.split(',');\n      if (arr.length < 8) {\n        arr = [1, 2, 3, 4, 5, 6, 7, 8];\n      }\n      var red_num = [0, 10, 20, 30, 40, 50, 11, 41];\n      var blue_num = [55, 45, 35, 25, 15, 5, 44, 14];\n\n      for (num in blue_num) {\n        wkMap[blue_num[num]] = parseInt(arr[num]);\n      }\n      for (num in red_num) {\n        wkMap[red_num[num]] = -1 * parseInt(arr[num]);\n      }\n    }\n\n    return wkMap;\n  }\n  /** \n   * ログをデコード。\n   */\n  function decodeLog(logstr, wkInitMap) {\n    var wklogArray = [];\n    var wkMap = Aijs.copyMap(wkInitMap);\n    var arrow = {\n      'q': 0, 'w': 1, 'e': 2,\n      'a': 3, 's': 4, 'd': 5,\n      'z': 6, 'x': 7, 'c': 8\n    };\n    logstr = logstr.replace(/q/g, 'q,').replace(/w/g, 'w,').replace(/e/g, 'e,');\n    logstr = logstr.replace(/a/g, 'a,').replace(/s/g, 's,').replace(/d/g, 'd,');\n    logstr = logstr.replace(/z/g, 'z,').replace(/x/g, 'x,').replace(/c/g, 'c,');\n    var logArr = logstr.split(',');\n\n    wklogArray.push(wkMap);\n    for (var i = 0; i < logArr.length; i++) {\n      if (logArr[i] === '') { continue; }\n      var arw = arrow[logArr[i].match(/[qweasdzxc]/)[0]];\n      var from = parseInt(logArr[i].match(/\\d*/)[0]);\n      var to = (Math.floor(from / 10) + Math.floor(arw % 3) - 1) * 10 +\n       (Math.floor(from % 10) + Math.floor(arw / 3) - 1);\n      wkMap = Aijs.copyMap(wkMap);\n      wkMap[to] = parseInt(wkMap[from]);\n      wkMap[from] = 0;\n      wklogArray.push(wkMap);\n    }\n    return wklogArray;\n  }\n  /** \n   * ログをエンコード\n   */\n  function encodeLog(wklogArray) {\n    var logstr = '';\n    var arrow = ['q', 'w', 'e',\n      'a', 's', 'd',\n      'z', 'x', 'c'];\n    for (var i in wklogArray) {\n      var from = wklogArray[i][0];\n      var to = wklogArray[i][1];\n      var x_vec = ((Math.floor(to / 10)) - Math.floor(from / 10));\n      var y_vec = ((Math.floor(to % 10)) - Math.floor(from % 10));\n      var arw = '';\n      if (x_vec === -1 && y_vec === -1) { arw = 'q'; }\n      if (x_vec === 0 && y_vec === -1) { arw = 'w' ;}\n      if (x_vec === 1 && y_vec === -1) { arw = 'e' ;}\n      if (x_vec === -1 && y_vec === 0) { arw = 'a'; }\n      if (x_vec === 0 && y_vec === 0) { arw = 's' ;}\n      if (x_vec === 1 && y_vec === 0) { arw = 'd' ;}\n      if (x_vec === -1 && y_vec === 1) { arw = 'z'; }\n      if (x_vec === 0 && y_vec === 1) { arw = 'x' ;}\n      if (x_vec === 1 && y_vec === 1) { arw = 'c'; }\n      logstr += from + arw;\n    }\n    return logstr;\n  }\n\n  /** \n   * ログを全部巻き戻す\n   */\n  function move_start() {\n    logPointer = 0;\n    autoLog=false;    \n    thisMap = Aijs.copyMap(logArray[logPointer]);\n    winner=null;\n    goaled=false;\n    updateMessage();\n    flush(false, false);\n  }\n\n  /** \n   * ログを戻す\n   */\n  function move_prev() {\n    if (logPointer <= 0) { return; }\n    autoLog=false;    \n    logPointer -= 1;\n    thisMap = Aijs.copyMap(logArray[logPointer]);\n    winner=null;\n    goaled=false;\n    updateMessage();\n    flush(false, false);\n  }\n\n  /** \n   * ログを進める\n   */\n  function move_next() {\n    if (logPointer + 1 > logArray.length - 1) { return; }\n    logPointer += 1;\n    thisMap = Aijs.copyMap(logArray[logPointer]);\n    updateMessage();\n    flush(false, false);\n  }\n\n  /** \n   * ログを最後まで進める。\n   */\n  function move_end() {\n    logPointer = logArray.length - 1;\n    autoLog=false;    \n    thisMap = Aijs.copyMap(logArray[logPointer]);\n    updateMessage();\n    flush(false, false);\n  }\n\n  /** \n   * リセット\n   */\n  function reloadnew() {\n    var url = document.location.href.split('?')[0];\n\n    //demo中ならdemoを終了\n    if(demo===true){\n      ev_mouseClick(null);\n      return;\n    }\n\n    // パラメータを取得\n    var paramObj = getParam();\n    if (paramObj.lang) {\n      url += '?lang=' + paramObj.lang;\n    }\n    if (navigator.onLine) {\n      location.href = url;\n    } else {\n      thisMap = Aijs.copyMap(startMap);\n      shuffleBoard();\n      logArray2 = [];\n      message = '';\n      winner = null;\n      turn_player = 1;\n      flush(false, false);\n    }\n  }\n\n  /** \n   * 検討画面に飛ぶ\n   */\n  function jumpkento() {\n    var url = document.location.href.split('?')[0];\n    var init = '?init=' + startMap[55] + ','+\n     startMap[45] + ','+\n     startMap[35] + ','+\n     startMap[25] + ','+\n     startMap[15] + ','+\n     startMap[5] + ','+\n     startMap[44] + ','+\n     startMap[14];\n    var log = '&log=' + encodeLog(logArray2);\n    log += '&lv=' + document.querySelector('#level').value;\n    location.href = url + init + log;\n  }\n  /** \n   * ログをツイートする。\n   */\n  function tweetlog() {\n    var url = document.location.href.split('?')[0];\n    var init = '?init=' + startMap[55] + ','+\n     startMap[45] + ','+\n     startMap[35] + ','+\n     startMap[25] + ','+\n     startMap[15] + ','+\n     startMap[5] + ','+\n     startMap[44] + ','+\n     startMap[14];\n    var log = '%26log=' + encodeLog(logArray2);\n    log += '%26lv=' + document.querySelector('#level').value;\n    window.open('https://twitter.com/intent/tweet?text=' + url + init + log + '%20%23colamone');\n  }\n  /** \n   * ツイートボタンを読み込む。\n   */\n  function setTweet() {\n    /*jshint -W030 */\n    !function (d, s, id) {\n      var js, fjs = d.getElementsByTagName(s)[0];\n      if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.async = true; js.src = 'https://platform.twitter.com/widgets.js'; fjs.parentNode.insertBefore(js, fjs); }\n    } (document, 'script', 'twitter-wjs');\n  }\n  /** \n   * botかどうか判定\n   */\n  function isBot(){\n    var ua = window.navigator.userAgent.toLowerCase();\n    if (ua.indexOf('bot') != -1 ||\n    ua.indexOf('lighthouse') != -1||\n    ua.indexOf('headless') != -1) {\n      return true;\n    }\n    return false;\n  }\n\n})((this || 0).self || global);\n\n/** \n * init \n */\ndocument.addEventListener('DOMContentLoaded', function() {\n  BoardGamejs.init();\n});\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n"],"sourceRoot":""}